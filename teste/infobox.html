<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MiauAPI Notifica√ß√µes</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Inter", sans-serif; }

    body {
      background: transparent;
      overflow: hidden;
      pointer-events: none;
    }

    .notify-container {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 10px;
      z-index: 9999;
    }

    .notify {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 250px;
      max-width: 320px;
      padding: 10px 14px;
      border-radius: 8px;
      color: #fff;
      backdrop-filter: blur(8px);
      border: 1px solid transparent;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      animation: slideIn 0.4s ease;
      pointer-events: all;
    }

    .notify.info { background: rgba(0,170,255,0.15); border-color: rgba(0,170,255,0.6); }
    .notify.sucesso { background: rgba(17,255,0,0.15); border-color: rgba(17,255,0,0.6); }
    .notify.erro { background: rgba(255,0,0,0.15); border-color: rgba(255,0,0,0.6); }
    .notify.warning { background: rgba(255,200,0,0.15); border-color: rgba(255,200,0,0.6); }

    .notify i {
      font-size: 16px;
      min-width: 20px;
      text-align: center;
    }

    .notify p {
      font-size: 13px;
      font-weight: 600;
      color: #fff;
      flex: 1;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="notify-container" id="notifyContainer"></div>

  <script>
    const container = document.getElementById("notifyContainer");

    // Mapa de √≠cones por tipo
    const icons = {
      info: "‚ÑπÔ∏è",
      sucesso: "‚úÖ",
      erro: "‚ùå",
      warning: "‚ö†Ô∏è"
    };

    // Fun√ß√£o principal de notifica√ß√£o
    function showNotification(message, duration = 5000, size = "medium", position = "top-right", level = "info") {
      const box = document.createElement("div");
      box.className = `notify ${level}`;
      box.innerHTML = `<i>${icons[level] || "üí¨"}</i><p>${message}</p>`;
      container.appendChild(box);

      // Remover ap√≥s o tempo definido
      setTimeout(() => {
        box.style.animation = "slideOut 0.3s ease forwards";
        setTimeout(() => box.remove(), 300);
      }, duration);
    }

    // Expor API global
    window.MiauAPI = {
      infobox: (mensagem, tempo = 5000, tamanho = "medium", posicao = "top-right", level = "info") => {
        showNotification(mensagem, tempo, tamanho, posicao, level);
      }
    };

    // Receber mensagens do Lua (SendDuiMessage)
    window.addEventListener("message", (event) => {
      let data = event.data;
      try {
        if (typeof data === "string") data = JSON.parse(data);
      } catch (e) {}

      if (!data || data.action !== "notify") return;

      showNotification(
        data.message || "Sem mensagem",
        data.duration || 5000,
        data.size || "medium",
        data.position || "top-right",
        data.level || "info"
      );
    });

    // Exemplo local (para testar direto no navegador)
    // setTimeout(() => MiauAPI.infobox("Sistema iniciado com sucesso!", 4000, "medium", "top-right", "sucesso"), 1000);
  </script>
</body>
</html>
